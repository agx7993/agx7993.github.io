<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>云端PDF阅读器</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --text-color: #1a1a1a;
            --sidebar-bg: #ffffff;
            --control-bg: #e4e6eb;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #e4e6eb;
            --sidebar-bg: #2d2d2d;
            --control-bg: #3a3a3a;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Segoe UI", system-ui;
            transition: background 0.3s;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid rgba(0,0,0,0.1);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .pdf-controls {
            padding: 15px;
            background: var(--control-bg);
            display: flex;
            gap: 12px;
            align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        button {
            padding: 8px 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        input[type="number"] {
            padding: 6px;
            width: 80px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        .pdf-container {
            flex: 1;
            overflow: auto;
            padding: 20px;
            position: relative;
        }

        .pdf-viewer {
            transform-origin: top left;
        }

        .file-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .file-item {
            padding: 10px;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 8px;
            transition: background 0.2s;
        }

        .file-item:hover {
            background: rgba(0,0,0,0.05);
        }

        .theme-toggle {
            margin-left: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h3>云端文档</h3>
            <ul class="file-list" id="fileList"></ul>
        </div>
        
        <div class="main-content">
            <div class="pdf-controls">
                <button onclick="zoomOut()">-</button>
                <button onclick="zoomIn()">+</button>
                <button onclick="prevPage()">上一页</button>
                <button onclick="nextPage()">下一页</button>
                <input type="number" id="pageInput" min="1">
                <button onclick="goToPage()">跳转</button>
                <span id="pageNum">1/1</span>
                <button class="theme-toggle" onclick="toggleTheme()">🌓</button>
            </div>
            <div class="pdf-container">
                <canvas id="pdfViewer" class="pdf-viewer"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script>
        let currentPage = 1;
        let totalPages = 1;
        let scale = 1;
        let pdfInstance = null;
        const cloudFiles = [
            { name: "文档.pdf", url: "https://1drv.ms/w/c/92631f121f19722e/EdJhgqwBvnFFoznUJsokLcQB_U25YdEPogzazJ6Pm-dDvQ?e=nYO9XG" },
            { name: "技术手册.pdf", url: "example.com/doc2.pdf" },
            { name: "报告2023.pdf", url: "example.com/doc3.pdf" }
        ];

        function initFileList() {
            const list = document.getElementById('fileList');
            cloudFiles.forEach(file => {
                const li = document.createElement('li');
                li.className = 'file-item';
                li.textContent = file.name;
                li.onclick = () => loadPDF(file.url);
                list.appendChild(li);
            });
        }

        async function loadPDF(url) {
            const loadingTask = pdfjsLib.getDocument(url);
            pdfInstance = await loadingTask.promise;
            totalPages = pdfInstance.numPages;
            currentPage = 1;
            updatePageInfo();
            renderPage();
        }

        async function renderPage() {
            const page = await pdfInstance.getPage(currentPage);
            const viewport = page.getViewport({ scale });
            const canvas = document.getElementById('pdfViewer');
            const context = canvas.getContext('2d');
            
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            
            const renderContext = {
                canvasContext: context,
                viewport: viewport
            };
            await page.render(renderContext).promise;
        }

        function updatePageInfo() {
            document.getElementById('pageNum').textContent = `${currentPage}/${totalPages}`;
        }

        function zoomIn() {
            scale += 0.1;
            renderPage();
        }

        function zoomOut() {
            if (scale > 0.2) scale -= 0.1;
            renderPage();
        }

        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                renderPage();
                updatePageInfo();
            }
        }

        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                renderPage();
                updatePageInfo();
            }
        }

        function goToPage() {
            const page = parseInt(document.getElementById('pageInput').value);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderPage();
                updatePageInfo();
            }
        }

        function toggleTheme() {
            document.body.setAttribute('data-theme', 
                document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark'
            );
        }

        // 初始化
        initFileList();
        loadPDF(cloudFiles[0].url);
    </script>
</body>
</html>